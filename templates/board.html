<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Task Board Mini App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }

        body {
            background: #f0f2f5;
            min-height: 100vh;
            padding: 12px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        /* –•–µ–¥–µ—Ä —Å –ø—Ä–æ—Ñ–∏–ª–µ–º */
        .header {
            background: white;
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .header h1 {
            font-size: 24px;
            font-weight: 600;
            background: linear-gradient(135deg, #0088cc, #5ac8fa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .user-badge {
            background: #e9ecef;
            padding: 8px 16px;
            border-radius: 30px;
            font-size: 10px;
            font-weight: 500;
            color: #495057;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .user-badge::before {
            content: "üë§";
            font-size: 16px;
        }

        /* –î–æ—Å–∫–∞ —Å –∑–∞–¥–∞—á–∞–º–∏ */
        .board {
            display: flex;
            gap: 16px;
            margin-bottom: 24px;
            flex-wrap: wrap;
        }

        .column {
            flex: 1;
            min-width: 250px;
            background: white;
            border-radius: 20px;
            padding: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }

        .column-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 2px solid #f1f3f5;
        }

        .column-header h3 {
            font-size: 18px;
            font-weight: 600;
            color: #212529;
        }

        .task-count {
            background: #f1f3f5;
            padding: 4px 10px;
            border-radius: 30px;
            font-size: 14px;
            font-weight: 500;
            color: #495057;
        }

        /* –ö–∞—Ä—Ç–æ—á–∫–∞ –∑–∞–¥–∞—á–∏ */
        .task-card {
            background: #f8f9fa;
            border-radius: 14px;
            padding: 16px;
            margin-bottom: 12px;
            border: 1px solid #e9ecef;
            transition: all 0.2s ease;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .task-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.1);
            border-color: #0088cc;
        }

        .task-title {
            font-size: 16px;
            font-weight: 600;
            color: #212529;
            margin-bottom: 8px;
        }

        .task-desc {
            font-size: 14px;
            color: #6c757d;
            margin-bottom: 12px;
            line-height: 1.4;
        }

        /* –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ */
        .comments-section {
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px dashed #dee2e6;
        }

        .comments-title {
            font-size: 13px;
            font-weight: 600;
            color: #495057;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .comments-title::before {
            content: "üí¨";
            font-size: 12px;
        }

        .comment-item {
            background: white;
            padding: 8px 12px;
            border-radius: 12px;
            margin-bottom: 6px;
            font-size: 13px;
            border: 1px solid #e9ecef;
        }

        .comment-user {
            font-weight: 600;
            color: #0088cc;
            margin-right: 8px;
        }

        .comment-text {
            color: #212529;
        }

        /* –§–æ—Ä–º–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è */
        .comment-form {
            display: flex;
            gap: 8px;
            margin-top: 10px;
        }

        .comment-input {
            flex: 1;
            padding: 10px 14px;
            border: 1px solid #dee2e6;
            border-radius: 20px;
            font-size: 13px;
            outline: none;
            transition: all 0.2s;
            background: white;
        }

        .comment-input:focus {
            border-color: #0088cc;
            box-shadow: 0 0 0 3px rgba(0,136,204,0.1);
        }

        .comment-btn {
            background: #0088cc;
            color: white;
            border: none;
            border-radius: 20px;
            padding: 10px 18px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .comment-btn:hover {
            background: #006699;
            transform: scale(1.02);
        }

        /* –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π */
        .task-actions {
            display: flex;
            gap: 8px;
            margin-top: 12px;
            flex-wrap: wrap;
        }

        .action-btn {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 20px;
            padding: 6px 12px;
            font-size: 12px;
            font-weight: 500;
            color: #495057;
            cursor: pointer;
            transition: all 0.2s;
            flex: 1;
            min-width: 80px;
        }

        .action-btn:hover {
            background: #0088cc;
            border-color: #0088cc;
            color: white;
        }

        .action-btn.backlog:hover { background: #ffc107; border-color: #ffc107; color: #212529; }
        .action-btn.inprogress:hover { background: #17a2b8; border-color: #17a2b8; color: white; }
        .action-btn.done:hover { background: #28a745; border-color: #28a745; color: white; }

        /* –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∞) */
        .admin-section {
            background: white;
            border-radius: 20px;
            padding: 20px;
            margin-top: 24px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }

        .admin-section h3 {
            font-size: 18px;
            font-weight: 600;
            color: #212529;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .admin-section h3::before {
            content: "‚ö°";
            font-size: 20px;
        }

        .admin-badge {
            background: linear-gradient(135deg, #ff4757, #ff6b81);
            color: white;
            padding: 4px 12px;
            border-radius: 30px;
            font-size: 12px;
            font-weight: 500;
            margin-left: 10px;
        }

        .input-group {
            margin-bottom: 16px;
        }

        .input-group input,
        .input-group textarea {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #e9ecef;
            border-radius: 14px;
            font-size: 15px;
            outline: none;
            transition: all 0.2s;
            background: white;
        }

        .input-group input:focus,
        .input-group textarea:focus {
            border-color: #0088cc;
            box-shadow: 0 0 0 3px rgba(0,136,204,0.1);
        }

        .input-group textarea {
            min-height: 100px;
            resize: vertical;
        }

        .create-btn {
            background: linear-gradient(135deg, #0088cc, #5ac8fa);
            color: white;
            border: none;
            border-radius: 14px;
            padding: 16px 24px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            width: 100%;
            border: none;
        }

        .create-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,136,204,0.3);
        }

        .create-btn:active {
            transform: translateY(0);
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏ */
        .loading {
            text-align: center;
            padding: 40px;
            color: #6c757d;
        }

        .loading::after {
            content: "...";
            animation: dots 1.5s steps(4, end) infinite;
        }

        @keyframes dots {
            0%, 20% { content: ""; }
            40% { content: "."; }
            60% { content: ".."; }
            80%, 100% { content: "..."; }
        }

        /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
        .toast {
            position: fixed;
            bottom: 24px;
            left: 50%;
            transform: translateX(-50%);
            background: #212529;
            color: white;
            padding: 12px 24px;
            border-radius: 30px;
            font-size: 14px;
            font-weight: 500;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1000;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translate(-50%, 20px);
            }
            to {
                opacity: 1;
                transform: translate(-50%, 0);
            }
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            .board {
                flex-direction: column;
            }
            
            .column {
                width: 100%;
            }
            
            .header {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –•–µ–¥–µ—Ä -->
        <div class="header">
            <h1>üìã –î–æ—Å–∫–∞ –∑–∞–¥–∞—á</h1>
            <div class="user-badge" id="userBadge">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>

        <!-- –î–æ—Å–∫–∞ –∑–∞–¥–∞—á -->
        <div class="board">
            <div class="column" id="Backlog">
                <div class="column-header">
                    <h3>üì• –ó–∞–¥–∞—á–∏</h3>
                    <span class="task-count" id="countBacklog">0</span>
                </div>
                <div id="BacklogTasks"></div>
            </div>
            
            <div class="column" id="InProgress">
                <div class="column-header">
                    <h3>‚ö° –í —Ä–∞–±–æ—Ç–µ</h3>
                    <span class="task-count" id="countInProgress">0</span>
                </div>
                <div id="InProgressTasks"></div>
            </div>
            
            <div class="column" id="Done">
                <div class="column-header">
                    <h3>‚úÖ –ì–æ—Ç–æ–≤–æ</h3>
                    <span class="task-count" id="countDone">0</span>
                </div>
                <div id="DoneTasks"></div>
            </div>
        </div>

        <!-- –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏ (–ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–µ–º, –Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∞–≤–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ) -->
        <div class="admin-section" id="adminSection">
            <h3>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É <span class="admin-badge">Admin</span></h3>
            <div class="input-group">
                <input type="text" id="taskTitle" placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫ –∑–∞–¥–∞—á–∏" maxlength="50">
            </div>
            <div class="input-group">
                <textarea id="taskDesc" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ (–º–∞–∫—Å. 200 —Å–∏–º–≤–æ–ª–æ–≤)" maxlength="200"></textarea>
            </div>
            <button class="create-btn" onclick="createTask()">‚ú® –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É</button>
        </div>
    </div>

    <script>
        let telegramId = null;
        let currentToast = null;

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        window.Telegram.WebApp.ready();
        window.Telegram.WebApp.expand(); // –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω
        
        // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        try {
            telegramId = window.Telegram.WebApp.initDataUnsafe.user?.id || '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
            document.getElementById('userBadge').innerHTML = `ID: ${telegramId}`;
            
            // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —Ç–µ–º—É Telegram
            if (window.Telegram.WebApp.colorScheme === 'dark') {
                document.body.style.background = '#1c1c1e';
            }
        } catch (e) {
            console.log('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è Telegram ID:', e);
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        function showToast(message, isError = false) {
            if (currentToast) {
                currentToast.remove();
            }
            
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.style.background = isError ? '#dc3545' : '#212529';
            toast.textContent = message;
            document.body.appendChild(toast);
            currentToast = toast;
            
            setTimeout(() => {
                toast.remove();
                currentToast = null;
            }, 3000);
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–¥–∞—á
        async function fetchTasks() {
            try {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
                ['BacklogTasks', 'InProgressTasks', 'DoneTasks'].forEach(id => {
                    document.getElementById(id).innerHTML = '<div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–¥–∞—á</div>';
                });

                const res = await fetch("/api/tasks");
                if (!res.ok) throw new Error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏');
                const tasks = await res.json();

                // –û—á–∏—â–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
                ['BacklogTasks', 'InProgressTasks', 'DoneTasks'].forEach(id => {
                    document.getElementById(id).innerHTML = '';
                });

                // –°—á–µ—Ç—á–∏–∫–∏
                let counts = { Backlog: 0, InProgress: 0, Done: 0 };

                // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –∑–∞–¥–∞—á–∏
                tasks.forEach(task => {
                    const status = task.status === "In Progress" ? "InProgress" : task.status;
                    counts[status]++;
                    
                    const taskElement = createTaskElement(task);
                    document.getElementById(`${status}Tasks`).appendChild(taskElement);
                    
                    // –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
                    fetchComments(task.id);
                });

                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫–∏
                document.getElementById('countBacklog').textContent = counts.Backlog || 0;
                document.getElementById('countInProgress').textContent = counts.InProgress || 0;
                document.getElementById('countDone').textContent = counts.Done || 0;

            } catch (error) {
                console.error('–û—à–∏–±–∫–∞:', error);
                showToast('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞–¥–∞—á', true);
                
                ['BacklogTasks', 'InProgressTasks', 'DoneTasks'].forEach(id => {
                    document.getElementById(id).innerHTML = '<div style="text-align: center; padding: 20px; color: #dc3545;">‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</div>';
                });
            }
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ –∑–∞–¥–∞—á–∏
        function createTaskElement(task) {
            const div = document.createElement('div');
            div.className = 'task-card';
            div.id = `task-${task.id}`;
            
            // –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
            div.innerHTML = `
                <div class="task-title">${escapeHtml(task.title)}</div>
                <div class="task-desc">${escapeHtml(task.description) || '–ù–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è'}</div>
                <div class="comments-section">
                    <div class="comments-title">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</div>
                    <div id="comments-${task.id}"></div>
                    <div class="comment-form">
                        <input type="text" class="comment-input" id="commentInput-${task.id}" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..." maxlength="100">
                        <button class="comment-btn" onclick="addComment(${task.id})">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                    </div>
                </div>
            `;

            // –ö–Ω–æ–ø–∫–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è (–¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
            const actionsDiv = document.createElement('div');
            actionsDiv.className = 'task-actions';
            
            const statuses = [
                { name: 'Backlog', class: 'backlog', emoji: 'üì•' },
                { name: '–í —Ä–∞–±–æ—Ç—É', class: 'inprogress', emoji: '‚ö°' },
                { name: '–ì–æ—Ç–æ–≤–æ', class: 'done', emoji: '‚úÖ' }
            ];
            
            statuses.forEach(s => {
                if (s.name !== task.status) {
                    const btn = document.createElement('button');
                    btn.className = `action-btn ${s.class}`;
                    btn.innerHTML = `${s.emoji} ${s.name}`;
                    btn.onclick = () => moveTask(task.id, s.name);
                    actionsDiv.appendChild(btn);
                }
            });
            
            div.appendChild(actionsDiv);
            
            return div;
        }

        // –ó–∞—â–∏—Ç–∞ –æ—Ç XSS
        function escapeHtml(unsafe) {
            if (!unsafe) return '';
            return unsafe
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
                .replace(/"/g, "&quot;")
                .replace(/'/g, "&#039;");
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
        async function createTask() {
            const title = document.getElementById('taskTitle').value.trim();
            const desc = document.getElementById('taskDesc').value.trim();

            if (!title) {
                showToast('–í–≤–µ–¥–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∑–∞–¥–∞—á–∏', true);
                return;
            }

            try {
                const res = await fetch("/api/tasks", {
                    method: "POST",
                    headers: {"Content-Type": "application/json"},
                    body: JSON.stringify({
                        user_id: telegramId,
                        title: title,
                        description: desc
                    })
                });

                if (!res.ok) {
                    const error = await res.text();
                    throw new Error(error);
                }

                // –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É
                document.getElementById('taskTitle').value = '';
                document.getElementById('taskDesc').value = '';
                
                showToast('‚úÖ –ó–∞–¥–∞—á–∞ —Å–æ–∑–¥–∞–Ω–∞');
                fetchTasks();

            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è:', error);
                showToast('‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏', true);
            }
        }

        // –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
        async function moveTask(taskId, status) {
            try {
                const res = await fetch(`/api/tasks/${taskId}/status`, {
                    method: "POST",
                    headers: {"Content-Type": "application/json"},
                    body: JSON.stringify({
                        user_id: telegramId,
                        status: status
                    })
                });

                if (!res.ok) throw new Error('–û—à–∏–±–∫–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è');
                
                showToast(`‚úÖ –ó–∞–¥–∞—á–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∞ –≤ ${status}`);
                fetchTasks();

            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è:', error);
                showToast('‚ùå –û—à–∏–±–∫–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –∑–∞–¥–∞—á–∏', true);
            }
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
        async function addComment(taskId) {
            const input = document.getElementById(`commentInput-${taskId}`);
            const content = input.value.trim();

            if (!content) {
                showToast('–í–≤–µ–¥–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π', true);
                return;
            }

            try {
                const res = await fetch(`/api/tasks/${taskId}/comments`, {
                    method: "POST",
                    headers: {"Content-Type": "application/json"},
                    body: JSON.stringify({
                        user_id: telegramId,
                        content: content
                    })
                });

                if (!res.ok) throw new Error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏');
                
                input.value = '';
                showToast('üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–æ–±–∞–≤–ª–µ–Ω');
                fetchComments(taskId);

            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è:', error);
                showToast('‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è', true);
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
        async function fetchComments(taskId) {
            try {
                const res = await fetch(`/api/tasks/${taskId}/comments`);
                if (!res.ok) throw new Error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤');
                const comments = await res.json();
                
                const commentsDiv = document.getElementById(`comments-${taskId}`);
                if (!commentsDiv) return;
                
                commentsDiv.innerHTML = '';
                
                comments.forEach(c => {
                    const commentDiv = document.createElement('div');
                    commentDiv.className = 'comment-item';
                    
                    const userSpan = document.createElement('span');
                    userSpan.className = 'comment-user';
                    userSpan.textContent = `ID ${c.user_id}:`;
                    
                    const textSpan = document.createElement('span');
                    textSpan.className = 'comment-text';
                    textSpan.textContent = c.content;
                    
                    commentDiv.appendChild(userSpan);
                    commentDiv.appendChild(textSpan);
                    commentsDiv.appendChild(commentDiv);
                });

            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤:', error);
            }
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
        setInterval(fetchTasks, 30000);

        // –ó–∞–≥—Ä—É–∂–∞–µ–º –∑–∞–¥–∞—á–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
        fetchTasks();
    </script>
</body>
</html>